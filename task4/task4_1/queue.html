<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 
 "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
 	<title>Queue</title>
   		<link rel="stylesheet" href="reset.css">
   		<link rel="stylesheet" href="queue.css">   
   		<meta charset="utf-8">
</head>
	<body>
 		<div class="main">
 			<h1>Вітаємо!</h1>
 		</div>
 		<div class="variants">
 			<ul>
 				<li id="newPerson" onclick="ask()">заповнити форму</li>
 				<li id="showList" onclick="show()">список учасників</li>
                <li id="sortList" onclick="sort()">вибрати фільтри</li>
 			</ul>
 		</div>
        <div id='main'></div>
        
		<script type="text/javascript">
            var persons = [{
                name: "Alina",
                surname: "Shvets",
                age: 25,
                occupation: "SEO",
                languages: "HTML/CSS, javascript"
            },{
                name: "Oleksandr",
                surname: "Shvets",
                age: 24,
                occupation: "QA",
                languages: "HTML/CSS"
            }];
        
            var person = { 
                name: undefined, 
                surname: undefined, 
                age: undefined,
                occupation: undefined,
                languages: []
            }
       
            var newPerson = document.getElementById("newPerson");
                newPerson.onclick = function(ask) {
                    person.name = prompt("Ваше ім'я:");
                    person.surname = prompt("Ваше прізвище:");
                    person.age = prompt("Ваш вік:");
                    person.occupation = prompt("Ваша професія:");
                    person.languages = prompt("Якими мовами програмування Ви володієте?:");
                    persons.push(person);
                    person = { 
                        name: undefined, 
                        surname: undefined, 
                        age: undefined,
                        occupation: undefined,
                        languages: []
                    };

                if (confirm("Бажаєте переглянути весь список учасників черги?")) {
                    showImd();
                } else {
                    alert("Ви натиснули кнопку CANCEL")
                }

            };

            var showList = document.getElementById("showList");
                showList.onclick = function(show) {
                var table = document.createElement("table");
                var main =  document.getElementById("main");
                main.appendChild(table);
                var firtstRow = document.createElement("tr");
                table.appendChild(firtstRow);
                for(property in persons[0]) {
                    var mainElem = document.createElement("td");
                        firtstRow.appendChild(mainElem);
                        mainElem.innerHTML = property;
                }
                for (var i = 0 ; i < persons.length; i++) {
                    var row = document.createElement("tr");
                    table.appendChild(row);
                    for(j in persons[i]) {
                        var elem = document.createElement("td");
                        row.appendChild(elem);
                        elem.innerHTML = persons[i][j];
                    }
                }
            };

            function showImd() {
                var table = document.createElement("table");
                var main =  document.getElementById("main");
                main.appendChild(table);
                var firtstRow = document.createElement("tr");
                table.appendChild(firtstRow);
                for(property in persons[0]) {
                    var mainElem = document.createElement("td");
                        firtstRow.appendChild(mainElem);
                        mainElem.innerHTML = property;
                }
                for (var i = 0 ; i < persons.length; i++) {
                    var row = document.createElement("tr");
                    table.appendChild(row);
                    for(j in persons[i]) {
                        var elem = document.createElement("td");
                        row.appendChild(elem);
                        elem.innerHTML = persons[i][j];
                    }
                }
            };


            var sortList = document.getElementById("sortList");
                sortList.onclick = function(sort) {

            var start = prompt("Як Ви бажаєте відфільтрувати дані учасників: 1 - за іменем; 2 - за віком; 3 - відносно володіння мовами програмування", "");
                switch (start) {
                    case "1": {
                        for(var i = 0; i < persons.length; i++) {
                            document.write(persons[i].name + "<br />");
                        }           
                    }
                    break;
                    case "2": {
                        for(var i = 0; i < persons.length; i++) {
                            document.write(persons[i].age + "<br />");
                        }
                    }
                    break;
                    case "3": {
                        for(var i = 0; i < persons.length; i++) {
                            document.write(persons[i].languages.split(",") + "<br />");
                        }
                    }
                    break;
                    default: {
                    document.write("Повторіть спробу.");
                    }
                    break;
                }
            };

    </script>
 	</body> 
</html>